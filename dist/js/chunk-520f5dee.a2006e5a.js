(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-520f5dee"],{"10bc":function(t,e,a){"use strict";var i=a("20cc"),n=a.n(i);n.a},"14c3":function(t,e,a){var i=a("c6b6"),n=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var o=a.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"20cc":function(t,e,a){},5319:function(t,e,a){"use strict";var i=a("d784"),n=a("825a"),o=a("7b0b"),r=a("50c4"),s=a("a691"),c=a("1d80"),u=a("8aa5"),l=a("14c3"),v=Math.max,f=Math.min,d=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,a){return[function(a,i){var n=c(this),o=void 0==a?void 0:a[t];return void 0!==o?o.call(a,n,i):e.call(String(n),a,i)},function(t,o){var c=a(e,t,this,o);if(c.done)return c.value;var d=n(t),m=String(this),p="function"===typeof o;p||(o=String(o));var h=d.global;if(h){var b=d.unicode;d.lastIndex=0}var x=[];while(1){var y=l(d,m);if(null===y)break;if(x.push(y),!h)break;var _=String(y[0]);""===_&&(d.lastIndex=u(m,r(d.lastIndex),b))}for(var C="",j=0,I=0;I<x.length;I++){y=x[I];for(var S=String(y[0]),$=v(f(s(y.index),m.length),0),E=[],O=1;O<y.length;O++)E.push(g(y[O]));var w=y.groups;if(p){var D=[S].concat(E,$,m);void 0!==w&&D.push(w);var k=String(o.apply(void 0,D))}else k=i(S,m,$,E,w,o);$>=j&&(C+=m.slice(j,$)+k,j=$+S.length)}return C+m.slice(j)}];function i(t,a,i,n,r,s){var c=i+t.length,u=n.length,l=p;return void 0!==r&&(r=o(r),l=m),e.call(s,l,(function(e,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return a.slice(0,i);case"'":return a.slice(c);case"<":s=r[o.slice(1,-1)];break;default:var l=+o;if(0===l)return e;if(l>u){var v=d(l/10);return 0===v?e:v<=u?void 0===n[v-1]?o.charAt(1):n[v-1]+o.charAt(1):e}s=n[l-1]}return void 0===s?"":s}))}}))},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var i=a("1d80"),n=a("5899"),o="["+n+"]",r=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),c=function(t){return function(e){var a=String(i(e));return 1&t&&(a=a.replace(r,"")),2&t&&(a=a.replace(s,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},"6fe5":function(t,e,a){var i=a("da84"),n=a("58a8").trim,o=a("5899"),r=i.parseFloat,s=1/r(o+"-0")!==-1/0;t.exports=s?function(t){var e=n(String(t)),a=r(e);return 0===a&&"-"==e.charAt(0)?-0:a}:r},"8aa5":function(t,e,a){"use strict";var i=a("6547").charAt;t.exports=function(t,e,a){return e+(a?i(t,e).length:1)}},9263:function(t,e,a){"use strict";var i=a("ad6d"),n=RegExp.prototype.exec,o=String.prototype.replace,r=n,s=function(){var t=/a/,e=/b*/g;return n.call(t,"a"),n.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=void 0!==/()??/.exec("")[1],u=s||c;u&&(r=function(t){var e,a,r,u,l=this;return c&&(a=new RegExp("^"+l.source+"$(?!\\s)",i.call(l))),s&&(e=l.lastIndex),r=n.call(l,t),s&&r&&(l.lastIndex=l.global?r.index+r[0].length:e),c&&r&&r.length>1&&o.call(r[0],a,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(r[u]=void 0)})),r}),t.exports=r},"9e35":function(t,e,a){"use strict";var i=a("f179"),n=a.n(i);n.a},a15b:function(t,e,a){"use strict";var i=a("23e7"),n=a("44ad"),o=a("fc6a"),r=a("b301"),s=[].join,c=n!=Object,u=r("join",",");i({target:"Array",proto:!0,forced:c||u},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},ac1f:function(t,e,a){"use strict";var i=a("23e7"),n=a("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},acd8:function(t,e,a){var i=a("23e7"),n=a("6fe5");i({global:!0,forced:parseFloat!=n},{parseFloat:n})},b0c0:function(t,e,a){var i=a("83ab"),n=a("9bf2").f,o=Function.prototype,r=o.toString,s=/^\s*function ([^ (]*)/,c="name";!i||c in o||n(o,c,{configurable:!0,get:function(){try{return r.call(this).match(s)[1]}catch(t){return""}}})},d784:function(t,e,a){"use strict";var i=a("9112"),n=a("6eeb"),o=a("d039"),r=a("b622"),s=a("9263"),c=r("species"),u=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=!o((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,v){var f=r(t),d=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),m=d&&!o((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[c]=function(){return a},a.flags="",a[f]=/./[f]),a.exec=function(){return e=!0,null},a[f](""),!e}));if(!d||!m||"replace"===t&&!u||"split"===t&&!l){var p=/./[f],g=a(f,""[t],(function(t,e,a,i,n){return e.exec===s?d&&!n?{done:!0,value:p.call(e,a,i)}:{done:!0,value:t.call(a,e,i)}:{done:!1}})),h=g[0],b=g[1];n(String.prototype,t,h),n(RegExp.prototype,f,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)}),v&&i(RegExp.prototype[f],"sham",!0)}}},e40d:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"movie"},[a("van-tabs",{staticClass:"tabssz",attrs:{"line-height":"2px",border:!1,color:"#1989fa","title-active-color":"#1989fa"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("van-tab",{attrs:{title:"正在热映",name:"a"}},[a("div",{ref:"moviebox",staticClass:"movie-box",on:{scroll:t.lazyLoad}},[t._l(t.movieData.data.subjects,(function(e,i){return a("div",{key:i,ref:"movieitem",refInFor:!0,staticClass:"movie-item clearfix",attrs:{id:e.id},on:{click:function(a){return t.viewMovieDetail({name:"movieDetail",params:{id:e.id}})}}},[a("div",{staticClass:"fl movie-img"},[a("img",{staticClass:"auto-img",attrs:{src:e.images.medium,alt:""}})]),a("div",{staticClass:"fl movie-info"},[a("div",{staticClass:"one-text"},[a("span",{staticClass:"fl"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"fr movie-score"},[a("span",[t._v(t._s(e.rating.average))])])]),a("div",{staticClass:"one-text"},[t._v("时长："+t._s(e.durations[0]))]),a("div",{staticClass:"one-text"},[t._v("角色："+t._s(e.avatarsInfo))]),a("div",{staticClass:"one-text"},[t._v("类型："+t._s(e.genresInfo))]),a("div",{staticClass:"one-text"},[t._v("上映时间："+t._s(e.mainland_pubdate))]),a("div",{staticClass:"buy-btn"},[a("van-button",{staticClass:"button",attrs:{round:"",size:"mini",type:"info"},on:{click:function(a){return a.stopPropagation(),t.buyTick(e.id)}}},[t._v("选座购票")])],1)])])})),t.isHas?t._e():a("p",{staticClass:"tip-text"},[t._v("没有更多数据可加载了")])],2)]),a("van-tab",{attrs:{title:"即将上映",name:"b"}},[a("div",{ref:"moviebox",staticClass:"movie-box",on:{scroll:t.lazyLoad}},[t._l(t.comingSoon,(function(e,i){return a("div",{key:i,ref:"movieitem",refInFor:!0,staticClass:"movie-item clearfix",attrs:{id:e.id},on:{click:function(a){return t.viewMovieDetail({name:"movieDetail",params:{id:e.id}})}}},[a("div",{staticClass:"fl movie-img"},[a("img",{staticClass:"auto-img",attrs:{src:e.images.medium,alt:""}})]),a("div",{staticClass:"fl movie-info"},[a("div",{staticClass:"one-text"},[a("span",{staticClass:"fl"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"fr movie-score"},[a("span",[t._v(t._s(e.rating.average))])])]),a("div",{staticClass:"one-text"},[t._v("时长："+t._s(e.durations[0]))]),a("div",{staticClass:"one-text"},[t._v("角色："+t._s(e.avatarsInfo))]),a("div",{staticClass:"one-text"},[t._v("类型："+t._s(e.genresInfo))]),a("div",{staticClass:"one-text"},[t._v("上映时间："+t._s(e.mainland_pubdate))]),a("div",{staticClass:"buy-btn"},[a("van-button",{staticClass:"button",attrs:{round:"",size:"mini",type:"info"},on:{click:function(a){return a.stopPropagation(),t.buyTick(e.id)}}},[t._v("订票")])],1)])])})),t.isHas?t._e():a("p",{staticClass:"tip-text"},[t._v("没有更多数据可加载了")])],2)])],1)],1)},n=[],o=(a("a4d3"),a("4de4"),a("4160"),a("a15b"),a("fb6a"),a("b0c0"),a("e439"),a("dbb4"),a("b64b"),a("acd8"),a("ac1f"),a("5319"),a("159b"),a("ade3")),r=a("1157"),s=a.n(r),c=a("2f62");function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var v=Object(c["a"])("movieModule"),f=v.mapState,d={name:"movie",data:function(){return{activeName:"a",comingSoon:{}}},computed:l({},f(["movieData","params","isHas","isInit","isInitial","movieBox","movieBoxData"])),methods:{ComingSoon:function(){var t=this;this.axios({method:"GET",url:"https://douban.uieee.com/v2/movie/coming_soon"}).then((function(e){e.data.subjects.forEach((function(t){t.genresInfo=t.genres.join(" / "),t.avatarsInfo="",t.casts.forEach((function(e){t.avatarsInfo+=e.name+" / "})),t.avatarsInfo=t.avatarsInfo.slice(0,-3)})),t.comingSoon=e.data.subjects})).catch((function(t){}))},getMovieData:function(){var t=this;this.$toast.loading({duration:0,message:"加载中..."}),this.axios({method:"GET",url:"https://douban.uieee.com/v2/movie/in_theaters",params:this.params}).then((function(e){if(e.data.subjects.forEach((function(t){t.genresInfo=t.genres.join(" / "),t.avatarsInfo="",t.casts.forEach((function(e){t.avatarsInfo+=e.name+" / "})),t.avatarsInfo=t.avatarsInfo.slice(0,-3)})),t.isInit){var a=t.$refs.moviebox,i=a.clientHeight;t.$store.commit("movieModule/changeMovieBox",{movieBox:a,movieBoxHeight:i})}t.$store.commit("movieModule/changeMovieData",e),t.$toast.clear()})).catch((function(e){t.$toast.clear()}))},viewMovieDetail:function(t){this.$router.push(t)},lazyLoad:function(){var t=this;if(t.isHas){var e=setTimeout((function(){for(var e=1;e<t.movieBoxData.timers.length;e++)clearTimeout(t.movieBoxData.timers[e]);var a=document.querySelector(".tab-bar").clientHeight,i=t.$refs.movieitem[t.$refs.movieitem.length-1],n=i.getBoundingClientRect(),o=n.top,r=parseFloat(getComputedStyle(i).marginBottom),s=n.height,c=innerHeight-a-r-s+50>=o;c&&t.getMovieData(),t.$store.state.movieModule.movieBoxData.timers=[]}),1e3);t.$store.state.movieModule.movieBoxData.timers.push(e)}},buyTick:function(t){this.$router.push({name:"buyMovieTick",query:{id:t}})}},created:function(){this.ComingSoon();var t=this;s.a.ajax({type:"GET",url:"https://apis.map.qq.com/ws/location/v1/ip",data:{key:"YYTBZ-GFSRX-JSX4Z-7PG44-Y6P2T-IIFD2",output:"jsonp"},dataType:"jsonp",success:function(e){t.$store.commit("movieModule/changeLocationCity",e.result.ad_info.city.replace(/市$/,"")),t.isInitial&&t.getMovieData()}})}},m=d,p=(a("9e35"),a("10bc"),a("2877")),g=Object(p["a"])(m,i,n,!1,null,"489d91f5",null);e["default"]=g.exports},f179:function(t,e,a){}}]);